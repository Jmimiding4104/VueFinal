{"version":3,"file":"js/573.b7f9c8e0.js","mappings":"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","sources":["webpack://VueFinal/./src/views/Front/CartView.vue","webpack://VueFinal/./src/views/Front/CartView.vue?2af0"],"sourcesContent":["<template>\n  <div class=\"wrap\">\n    <div class=\"order-container\">\n      <div>\n        <div class=\"orderpage\">\n          <div class=\"orderhead\">\n            <h2>您的購物車</h2>\n            <div class=\"clear-cart\">\n              <button\n                class=\"btn btn-outline-danger\"\n                type=\"button\"\n                @click=\"delCarts()\"\n              >\n                刪除所有產品\n              </button>\n            </div>\n          </div>\n          <table class=\"table align-middle\">\n            <thead>\n              <tr>\n                <th style=\"width: 240px\"></th>\n                <th style=\"width: 240px\" class=\"text-center\">品項</th>\n                <th style=\"width: 240px\" class=\"text-center\">數量/單位</th>\n                <th style=\"width: 240px\" class=\"text-center\">單價</th>\n                <th style=\"width: 40px\"></th>\n              </tr>\n            </thead>\n            <tbody>\n              <template v-if=\"cartData.carts\">\n                <tr v-for=\"item in cartData.carts\" :key=\"item.id\">\n                  <td class=\"order-img\">\n                    <img\n                      :src=\"item.product.imageUrl\"\n                      class=\"card-img-top\"\n                      alt=\"...\"\n                    />\n                  </td>\n                  <td class=\"text-center\">{{ item.product.title }}</td>\n                  <td>\n                    <div class=\"input-group input-group-sm\">\n                      <div class=\"input-group mb-3\">\n                        <!--<input\n                          min=\"1\"\n                          type=\"number\"\n                          class=\"form-control\"\n                          v-model.number=\"item.qty\"\n                        />-->\n                        <select\n                          id=\"\"\n                          class=\"form-select\"\n                          v-model=\"item.qty\"\n                          @change=\"updateCarts(item)\"\n                          :disabled=\"isLoading === item.id\"\n                        >\n                          <option\n                            :value=\"num\"\n                            v-for=\"num in 100\"\n                            :key=\"`${num}${item.id}`\"\n                          >\n                            {{ num }}\n                          </option>\n                        </select>\n                        <span class=\"input-group-text\" id=\"basic-addon2\">{{\n                          item.product.unit\n                        }}</span>\n                      </div>\n                    </div>\n                  </td>\n                  <td class=\"text-center\">{{ item.final_total }}</td>\n                  <td>\n                    <button\n                      type=\"button\"\n                      class=\"btn btn-outline-danger btn-sm\"\n                      @click=\"delCartItem(item.id)\"\n                      :disabled=\"isLoading === item.id\"\n                    >\n                      x\n                    </button>\n                  </td>\n                </tr>\n              </template>\n            </tbody>\n            <tfoot class=\"order-tfooter\">\n              <tr>\n                <td colspan=\"3\">\n            <div class=\"ordercoupn\">\n            <input\n              type=\"text\"\n              id=\"coupon\"\n              v-model=\"couponCode\"\n              placeholder=\"請輸入優惠碼\"\n            />\n            <button class=\"btn btn-primary\" type=\"button\" @click=\"useCoupon()\">\n              折抵GO\n            </button>\n          </div>\n                </td>\n                <td colspan=\"1\" class=\"text-end\">總計</td>\n                <td class=\"text-end\">{{ cartData.total }}</td>\n              </tr>\n              <tr v-if=\"couponMoney.length != 0\">\n                <td colspan=\"4\" class=\"text-end\">折扣後價格</td>\n                <td class=\"text-end\">{{ couponMoney }}</td>\n              </tr>\n            </tfoot>\n          </table>\n          <div class=\"order-footer\">\n            <div class=\"order-next\">\n              <button\n                type=\"submit\"\n                class=\"btn btn-primary\"\n                @click.prevent=\"this.$router.push('/Products')\"\n              >\n                繼續購物\n              </button>\n            </div>\n            <div class=\"order-next\">\n              <button\n                type=\"submit\"\n                class=\"btn btn-primary\"\n                @click.prevent=\"nextView()\"\n              >\n                下一步\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"footer\">\n    <p>此網站非實際運營之網站，僅為學習用途。</p>\n  </div>\n</template>\n\n<style>\n.order-container {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0px 10px 0px 10px;\n}\n\n.orderpage {\n  width: 100%;\n  margin-bottom: 230px;\n}\n\n.orderhead {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.clear-cart {\n  max-height: 36px;\n}\n\n.orderpage h2 {\n  margin-top: 10px;\n  font-weight: bold;\n  color: brown;\n  border-left: 5px solid brown;\n  padding-left: 10px;\n}\n\n.orderpage table {\n  color: brown;\n}\n\n.orderpage tbody td {\n  color: black;\n}\n\n.order-img {\n  max-width: 100px;\n}\n\n.order-list {\n  font-weight: bold;\n  padding-left: 3px;\n  color: brown;\n  border-bottom: 3px solid brown;\n  border-left: 3px solid brown;\n}\n\n.clear-cart {\n  display: flex;\n}\n\n.order-footer {\n  display: flex;\n  justify-content: end;\n  align-items: center;\n}\n\n.order-next {\n  margin: 10px;\n}\n\n.ordercoupn {\n  display: flex;\n  align-items: center;\n}\n\n.ordercoupn button {\n  max-height: 30px;\n  display: flex;\n  align-items: center;\n}\n\n@media(max-width:600px) {\n  .order-footer {\n    justify-content: center;\n  }\n}\n\n@media(max-width:426px) {\n  .ordercoupn button {\n    max-height: none;\n  }\n}\n\n.user .item {\n  margin: 10px 0px;\n}\n</style>\n\n<script>\nimport emitter from '@/libs/emitter'\n\nexport default {\n  data () {\n    return {\n      cartData: {},\n      products: [],\n      product: {},\n      deleteAllCarts: {},\n      cart: {},\n      productId: '',\n      isLoading: '',\n      form: {\n        user: {\n          email: '',\n          name: '',\n          address: '',\n          tel: ''\n        },\n        message: ''\n      },\n      couponCode: '',\n      couponMoney: '',\n      orderStatus: false,\n      orderId: ''\n    }\n  },\n  methods: {\n    getProducts () {\n      this.$http\n        .get(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products/all`\n        )\n        .then((res) => {\n          this.products = res.data.products\n        })\n        .catch((err) => {\n          alert(err.data.message)\n        })\n    },\n    getCarts () {\n      this.$http\n        .get(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`)\n        .then((res) => {\n          this.cartData = res.data.data\n        })\n        .catch((err) => {\n          alert(err.data.message)\n        })\n    },\n    // qty = 1 參數預設值\n    addToCart (id, qty = 1) {\n      const data = {\n        product_id: id,\n        qty\n      }\n      this.isLoading = id\n      this.$http\n        .post(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`,\n          { data }\n        )\n        .then((res) => {\n          this.getCarts()\n          // this.$refs.productsModal.closeModal()\n          this.isLoading = ''\n          emitter.emit('get-cart')\n        })\n        .catch((err) => {\n          alert(err.data.message)\n        })\n    },\n    delCartItem (id) {\n      this.isLoading = id\n      this.$http\n        .delete(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${id}`\n        )\n        .then((res) => {\n          this.getCarts()\n          this.isLoading = ''\n          emitter.emit('get-cart')\n        })\n        .catch((err) => {\n          alert(err.data.message)\n        })\n    },\n    delCarts () {\n      this.$http\n        .delete(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/carts`\n        )\n        .then((res) => {\n          alert('已成功清除購物車')\n          this.getCarts()\n          emitter.emit('get-cart')\n        })\n        .catch((err) => {\n          alert(err.data.message)\n        })\n    },\n    updateCarts (item) {\n      const data = {\n        product_id: item.id,\n        qty: item.qty\n      }\n      this.isLoading = item.id\n      this.$http\n        .put(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${item.id}`,\n          { data }\n        )\n        .then((res) => {\n          this.getCarts()\n\n          this.isLoading = ''\n          // console.log(item);\n        })\n        .catch((err) => {\n          alert(err.data.message)\n        })\n    },\n    useCoupon () {\n      const Url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/coupon`\n      const code = this.couponCode\n      this.$http.post(Url, { data: { code } }).then((res) => {\n        console.log(res)\n        this.couponMoney = res.data.data.final_total\n      })\n    },\n    nextView () {\n      this.$router.push('/FillIn')\n    },\n    goPay () {\n      const { id } = this.$route.params\n      this.$http\n        .post(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/pay/${id}`\n        )\n        .then((res) => {\n          alert(res.data.message)\n          console.log(res)\n          this.$router.push(`/Finish/${this.orderId}`)\n        })\n    },\n    sendOrder () {\n      const apiUrl = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/order`\n      const data = {\n        user: this.form.user,\n        message: this.form.message\n      }\n      console.log(data)\n      this.$http\n        .post(apiUrl, { data })\n        .then((res) => {\n          this.orderId = res.data.orderId\n          console.log(this.orderId)\n          alert(res.data.message)\n          this.$refs.form.resetForm()\n          this.goPay()\n        })\n        .catch((err) => {\n          console.log(err)\n        })\n    },\n    isPhone (value) {\n      const phoneNumber = /^(09)[0-9]{8}$/\n      return phoneNumber.test(value) ? true : '需要正確的電話號碼'\n    },\n    openModal (id) {\n      this.$refs.CartModal.openModal()\n      this.productId = id\n      this.$refs.CartModal.getProduct()\n    }\n  },\n  mounted () {\n    this.getProducts()\n    this.getCarts()\n  }\n}\n</script>\n","import { render } from \"./CartView.vue?vue&type=template&id=5642192d\"\nimport script from \"./CartView.vue?vue&type=script&lang=js\"\nexport * from \"./CartView.vue?vue&type=script&lang=js\"\n\nimport \"./CartView.vue?vue&type=style&index=0&id=5642192d&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\x6xxv\\\\OneDrive\\\\桌面\\\\VueFinal\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","id","colspan","_hoisted_5","type","onClick","$options","_hoisted_8","$data","carts","_createElementBlock","_Fragment","key","_renderList","item","src","product","imageUrl","alt","_toDisplayString","title","qty","$event","onChange","disabled","num","value","_hoisted_15","unit","final_total","_hoisted_18","placeholder","_hoisted_22","total","length","_hoisted_24","_hoisted_25","$router","push","_hoisted_30","data","cartData","products","deleteAllCarts","cart","productId","isLoading","form","user","email","name","address","tel","message","couponCode","couponMoney","orderStatus","orderId","methods","getProducts","this","$http","get","then","res","catch","err","alert","getCarts","addToCart","product_id","post","emitter","delCartItem","delete","delCarts","updateCarts","put","useCoupon","Url","code","console","log","nextView","goPay","$route","params","sendOrder","apiUrl","$refs","resetForm","isPhone","phoneNumber","test","openModal","CartModal","getProduct","mounted","__exports__","render"],"sourceRoot":""}