"use strict";(self["webpackChunkVueFinal"]=self["webpackChunkVueFinal"]||[]).push([[24],{3024:function(e,l,s){s.r(l),s.d(l,{default:function(){return L}});var r=s(6252),a=s(9963),t=s(3577);const o={class:"wrap"},d={class:"fillin-view-title"},i=(0,r._)("h2",null,"填寫聯絡與寄送資料",-1),n=[i],u={class:"finish-title"},c=(0,r._)("h2",null,"謝謝您的訂購，歡迎下次再次光臨。",-1),m=[c],p={class:"fillin-view"},_={class:"information"},h={class:"row justify-content-center"},f={class:"mb-3"},v=(0,r._)("label",{for:"email",class:"form-label"},"Email",-1),b={class:"mb-3"},w=(0,r._)("label",{for:"name",class:"form-label"},"收件人姓名",-1),g={class:"mb-3"},y=(0,r._)("label",{for:"phone",class:"form-label"},"收件人手機",-1),k={class:"mb-3"},V=(0,r._)("label",{for:"address",class:"form-label"},"收件人地址",-1),z={class:"mb-3"},C=(0,r._)("label",{for:"message",class:"form-label"},"留言",-1),$={class:"order-finish-describe"},F=(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",{colspan:"2"}," 以下是您的訂購資訊，請再次確認。 ")])],-1),j=(0,r._)("td",null,"訂購姓名",-1),x=(0,r._)("td",null,"聯絡信箱",-1),S=(0,r._)("td",null,"寄送地址",-1),D=(0,r._)("td",null,"聯絡電話",-1),U=(0,r._)("td",null,"付款情況",-1),W=(0,r._)("td",null,"您的留言",-1),O={class:"order-products"},I=(0,r._)("h3",null,"我的購物車",-1),q={class:"order-item-descript"},M={class:"order-item-descript-1"},P={class:"order-item-descript-2"},E={class:"order-price"},H={class:"order-price-total"},N=(0,r._)("p",null,"原價",-1),T={class:"order-price-total"},Y=(0,r._)("p",null,"售價(應付金額)",-1),K={class:"payorder-next"},Z=(0,r._)("div",{class:"footer"},[(0,r._)("p",null,"此網站非實際運營之網站，僅為學習用途。")],-1);function A(e,l,s,i,c,A){const B=(0,r.up)("VField"),G=(0,r.up)("error-message"),J=(0,r.up)("VForm");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",o,[(0,r.wy)((0,r._)("div",d,n,512),[[a.F8,!1===c.orderStatus]]),(0,r.wy)((0,r._)("div",u,m,512),[[a.F8,!0===c.orderStatus]]),(0,r.Uk)(" "+(0,t.zw)(e.email)+" ",1),(0,r._)("div",p,[(0,r._)("div",_,[(0,r.wy)((0,r._)("div",h,[(0,r.Wm)(J,{ref:"form"},{default:(0,r.w5)((({errors:e})=>[(0,r._)("div",f,[v,(0,r.Wm)(B,{id:"email",name:"email",type:"email",class:(0,t.C_)(["form-control",{"is-invalid":e["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:c.form.user.email,"onUpdate:modelValue":l[0]||(l[0]=e=>c.form.user.email=e)},null,8,["class","modelValue"]),(0,r.Wm)(G,{name:"email",class:"invalid-feedback"})]),(0,r._)("div",b,[w,(0,r.Wm)(B,{id:"name",name:"姓名",type:"text",class:(0,t.C_)(["form-control",{"is-invalid":e["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:c.form.user.name,"onUpdate:modelValue":l[1]||(l[1]=e=>c.form.user.name=e)},null,8,["class","modelValue"]),(0,r.Wm)(G,{name:"姓名",class:"invalid-feedback"})]),(0,r._)("div",g,[y,(0,r.Wm)(B,{id:"phone",name:"手機",type:"text",class:(0,t.C_)(["form-control",{"is-invalid":e["手機"]}]),placeholder:"請輸入手機",rules:A.isPhone,modelValue:c.form.user.tel,"onUpdate:modelValue":l[2]||(l[2]=e=>c.form.user.tel=e)},null,8,["class","rules","modelValue"]),(0,r.Wm)(G,{name:"手機",class:"invalid-feedback"})]),(0,r._)("div",k,[V,(0,r.Wm)(B,{id:"address",name:"地址",type:"text",class:(0,t.C_)(["form-control",{"is-invalid":e["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:c.form.user.address,"onUpdate:modelValue":l[3]||(l[3]=e=>c.form.user.address=e)},null,8,["class","modelValue"]),(0,r.Wm)(G,{name:"地址",class:"invalid-feedback"})]),(0,r._)("div",z,[C,(0,r.wy)((0,r._)("textarea",{id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":l[4]||(l[4]=e=>c.form.message=e)},null,512),[[a.nr,c.form.message]])])])),_:1},512)],512),[[a.F8,!1===c.orderStatus]]),(0,r.wy)((0,r._)("div",$,[(0,r._)("table",null,[F,(0,r._)("tbody",null,[(0,r._)("tr",null,[j,(0,r._)("td",null,(0,t.zw)(c.form.user.name),1)]),(0,r._)("tr",null,[x,(0,r._)("td",null,(0,t.zw)(c.form.user.email),1)]),(0,r._)("tr",null,[S,(0,r._)("td",null,(0,t.zw)(c.form.user.address),1)]),(0,r._)("tr",null,[D,(0,r._)("td",null,(0,t.zw)(c.form.user.tel),1)]),(0,r._)("tr",null,[U,(0,r._)("td",null,(0,t.zw)(c.is_paid?"已付款":"未付款"),1)]),(0,r._)("tr",null,[W,(0,r._)("td",null,(0,t.zw)(c.form.message),1)])])])],512),[[a.F8,!0===c.orderStatus]])]),(0,r._)("div",O,[I,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(c.cartData.carts,(e=>((0,r.wg)(),(0,r.iD)("div",{class:"order-item",key:e.id},[(0,r._)("div",{class:"order-img",style:(0,t.j5)({backgroundImage:`url(${e.product.imageUrl})`})},null,4),(0,r._)("div",q,[(0,r._)("div",M,[(0,r._)("p",null,(0,t.zw)(e.product.title),1),(0,r._)("div",P,[(0,r._)("p",null,"x"+(0,t.zw)(e.qty)+(0,t.zw)(e.product.unit),1),(0,r._)("p",null,"$"+(0,t.zw)(e.final_total),1)])])])])))),128)),(0,r._)("div",E,[(0,r._)("div",H,[N,(0,r.Uk)("NT$"+(0,t.zw)(c.cartData.total),1)]),(0,r._)("div",T,[Y,(0,r.Uk)("NT$"+(0,t.zw)(c.cartData.final_total),1)])]),(0,r._)("div",K,[(0,r.wy)((0,r._)("button",{type:"submit",class:"btn btn-outline-primary",onClick:l[5]||(l[5]=(0,a.iM)((e=>this.$router.push("/Products")),["prevent"]))}," 繼續購物 ",512),[[a.F8,!1===c.orderStatus]]),(0,r.wy)((0,r._)("button",{class:"btn btn-primary",onClick:l[6]||(l[6]=(0,a.iM)((e=>A.sendOrder()),["prevent"]))}," 結帳 ",512),[[a.F8,!1===c.orderStatus]]),(0,r.wy)((0,r._)("button",{type:"submit",class:"btn btn-outline-primary",onClick:l[7]||(l[7]=(0,a.iM)((e=>A.payOrder()),["prevent"]))}," 繼續購物 ",512),[[a.F8,!0===c.orderStatus]]),(0,r.wy)((0,r._)("button",{class:"btn btn-primary",onClick:l[8]||(l[8]=(0,a.iM)((e=>A.payOrder()),["prevent"]))}," 前往付款 ",512),[[a.F8,!0===c.orderStatus]])])])])]),Z],64)}var B={data(){return{cartData:"",orderId:"",orderStatus:!1,form:{user:{name:"",email:"",tel:"",address:""},message:""},is_paid:""}},methods:{getCarts(){this.$http.get("https://vue3-course-api.hexschool.io/v2/api/godjj/cart").then((e=>{this.cartData=e.data.data,console.log(this.cartData)})).catch((e=>{alert(e.data.message)}))},isPhone(e){const l=/^(09)[0-9]{8}$/;return!!l.test(e)||"需要正確的電話號碼"},sendOrder(){const e="https://vue3-course-api.hexschool.io/v2/api/godjj/order",l={user:this.form.user,message:this.form.message};this.$http.post(e,{data:l}).then((e=>{this.orderId=e.data.orderId,alert(e.data.message),this.orderStatus=!0,this.getOrder()})).catch((e=>{console.log(e)}))},getOrder(){const e=`https://vue3-course-api.hexschool.io/v2/api/godjj/order/${this.orderId}`;this.$http.get(e).then((e=>{this.is_paid=e.order.is_paid}))},payOrder(){const e=`https://vue3-course-api.hexschool.io/v2/api/godjj/pay/${this.orderId}`;this.$http.post(e).then((e=>{this.$router.push("/Complete")}))}},mounted(){this.getCarts()}},G=s(3744);const J=(0,G.Z)(B,[["render",A]]);var L=J}}]);
//# sourceMappingURL=24.99b5bf34.js.map